local supernova = require 'supernova'

-- From: http://colorlisa.com/

local function strip(content)
  content = string.gsub(content, '^%s+', '')
  content = string.gsub(content, '%s+$', '')

  return content
end

local function build_theme(content)
  local theme = {
    identifier = nil,
    author = nil,
    colors = {}
  }

  local original_name, original_author

  for line in content:gmatch('([^\n]*)\n?') do
    line = strip(line)

    local by_position = line:find(' BY ')

    if by_position then
      local name = strip(line:sub(1, by_position))
      local author = strip(line:sub(by_position + 3, #line))

      original_name = name
      original_author = author

      author = author:lower()

      author = author:gsub('%s+', '-')

      theme.author = author

      local colon_position = name:find(':')

      if colon_position then
        name = strip(name:sub(colon_position+1, #name))
      end

      name = name:lower()

      name = name:gsub('%(', ' ')
      name = name:gsub('%)', ' ')
      name = name:gsub('%s+', '-')

      theme.identifier = name
    elseif line:find('#') then
      table.insert(theme.colors, line)
    end
  end

  theme['original_name'] = original_name
  theme['original_author'] = original_author

  return theme
end

local themes = [[
ADOBE (VARIANT): LUMINOUS DAY BY JOSEF ALBERS
#D77186
#61A2DA
#6CB7DA
#B5B5B3
#D75725

@

HOMAGE TO THE SQUARE (LA TEHUANA) BY JOSEF ALBERS
#C00559
#DE1F6C
#F3A20D
#F07A13
#DE6716

@

GOLDEN CLOUD BY GRETCHEN ALBRECHT
#171635
#00225D
#763262
#CA7508
#E9A621

@

RAINBOW BY BILLY APPLE
#F24D98
#813B7C
#59D044
#F3A002
#F2F44D

@

SPAR BY PER ARNOLDI
#C2151B
#2021A0
#3547B3
#E2C43F
#E0DCDD

@

BICYCLE RIDER BY THE LOIRE BY MILTON AVERY
#F3C937
#7B533E
#BFA588
#604847
#552723

@

CELLO PLAYER BY MILTON AVERY
#E2CACD
#2E7CA8
#F1C061
#DA7338
#741D13

@

THE SWAN BY HILMA AF KLINT
#D6CFC4
#466CA6
#D1AE45
#87240E
#040204

@

UNTITLED (BLACK KING CATCH SCORPIO) BY JEAN-MICHEL BASQUIAT
#8CABD9
#F6A7B8
#F1EC7A
#1D4D9F
#F08838

@

DUSTHEADS BY JEAN-MICHEL BASQUIAT
#C11432
#009ADA
#66A64F
#FDD10A
#070707

@

DANCING BAR IN BADEN-BADEN BY MAX BECKMANN
#4B3A51
#A77A4B
#ECC6A2
#A43020
#722D24

@

SEATED NUDE BY FERNANDO BOTERO
#99B6BD
#B3A86A
#ECC9A0
#D4613E
#BB9568

@

THE BIRTH OF VENUS BY SANDRO BOTTICELLI
#7A989A
#849271
#C1AE8D
#CF9546
#C67052

@

PORTRAIT OF DANTE BY SANDRO BOTTICELLI
#272725
#DDBD85
#DA694F
#A54A48
#FDFFE5

@

LANDSCAPE WITH THE FALL OF ICARUS BY PIETER BRUEGEL
#BFBED5
#7F9086
#A29A68
#676A4F
#A63C24

@

STRIPED COLUMN BY JACK BUSH
#529DCB
#ECA063
#71BF50
#F3CC4F
#D46934

@

NUDE BY JACK BUSH
#A1D8B6
#D2C48E
#F45F40
#F9AE8D
#80B9CE

@

THE LETTER BY MARY CASSATT
#1C5679
#BBB592
#CAC3B2
#808C5C
#5F4B3B

@

THE BATHERS BY PAUL CÉZANNE
#8399B3
#697A55
#C4AA88
#B68E52
#8C5B28

@

LA MARIÉE SOUS LE BALDAQUIN BY MARC CHAGALL
#3F6F76
#69B7CE
#C65840
#F4CE4B
#62496F

@

POKER GAME, 1894, BY C.M. COOLIDGE
#204035
#4A7169
#BEB59C
#735231
#49271B

@

THE PERSISTENCE OF MEMORY BY SALVADOR DALÍ
#40798C
#BCA455
#BFB37F
#805730
#514A2E

@

APPARITION OF FACE AND FRUIT DISH ON A BEACH BY SALVADOR DALÍ
#9BC0CC
#CAD8D8
#D0CE9F
#806641
#534832

@

MONA LISA BY LEONARDO DA VINCI
#C8B272
#A88B4C
#A0A584
#697153
#43362A

@

ANTHRACITE MINUET BY GENE DAVIS
#293757
#568D4B
#D5BB56
#D26A1B
#A41D1A

@

MYSTERY AND MELANCHOLY OF A STREET BY GIORGIO DE CHIRICO
#27403D
#48725C
#212412
#F3E4C2
#D88F2E

@

THE RED TOWER BY GIORGIO DE CHIRICO
#2992BF
#4CBED9
#292C17
#F9F6EF
#F0742A

@

AT THE MILLINER'S BY EDGAR DEGAS
#BDB592
#ACBBC5
#9E8D3D
#8C4F36
#2C2D2C

@

HOMMAGE A BLÉRIOT BY ROBERT DELAUNAY
#4368B6
#78A153
#DEC23B
#E4930A
#C53211

@

AIR, IRON, AND WATER BY ROBERT DELAUNAY
#A4B7E1
#B8B87A
#EFDE80
#EFBD37
#A85E5E

@

I SAW THE FIGURE 5 IN GOLD BY CHARLES DEMUTH
#E4AF79
#DF9C41
#AF7231
#923621
#2D2A28

@

SEAWALL BY RICHARD DIEBENKORN
#2677A5
#639BC1
#639BC1
#90A74A
#5D8722

@

THE NUN BY OTTO DIX
#1E1D20
#B66636
#547A56
#BDAE5B
#515A7C

@

DR. MAYER-HERMANN BY OTTO DIX
#E0DBC8
#C9BE90
#76684B
#CDAB7E
#3C2B23

@

LANDSCAPE BY MARCEL DUCHAMP
#D0CEC2
#7BAA80
#4B6B5E
#BF9A41
#980019

@

THE LARGE PIECE OF TURF BY ALBRECHT DÜRER
#657359
#9AA582
#8B775F
#D7C9BE
#F1E4DB

@

WOMAN, OLD MAN, AND FLOWER BY MAX ERNST
#91323A
#3A4960
#D7C969
#6D7345
#554540

@

GRAVITY BY M.C. ESCHER
#C1395E
#AEC17B
#F0CA50
#E07B42
#89A7C2

@

UNTITLED (APRIL 15) BY PAUL FEELEY
#2C458D
#E4DFD9
#425B4F
#EBAD30
#BF2124

@

UNTITLED (1964) BY LORSER FEITELSON
#202221
#661E2A
#AB381B
#EAD4A3
#E3DED8

@

MAUVE DISTRICT BY HELEN FRANKENTHALER
#5D7342
#D7AE04
#ECD7B8
#A58B8C
#272727

@

GIRL WITH A KITTEN BY LUCIAN FREUD
#E1D2BD
#A77E5E
#2D291D
#85868B
#83774D

@

SUSPENDED FORMS BY TERRY FROST
#EF5950
#8D5A78
#C66F26
#FB6B22
#DC2227

@

THE SIESTA BY PAUL GAUGUIN
#21344F
#8AAD05
#E2CE1B
#DF5D22
#E17976

@

UNTITLED (PINK AND ORANGE) BY RUPPRECHT GEIGER
#FF62A9
#F77177
#FA9849
#FE6E3A
#FD5A35

@

THE WIND BY HANS HOFMANN
#1A6DED
#2C7CE6
#145CBF
#162B3D
#F9ECE4

@

THE GREAT WAVE OFF KANAGAWA BY KATSUSHIKA HOKUSAI
#1F284C
#2D4472
#6E6352
#D9CCAC
#ECE2C6

@

A BASKET OF CLAMS BY WINSLOW HOMER
#A9944A
#F2D9B3
#725435
#8E9DBF
#BD483C

@

NIGHT WINDOWS BY EDWARD HOPPER
#67161C
#3F6148
#DBD3A4
#A4804C
#4B5F80

@

LOVE, INDIANA STABLE MAY 66 BY ROBERT INDIANA
#2659D8
#1C6FF3
#5EBC4E
#53A946
#F24534

@

RIFT SCULL BY JAMES JEAN
#51394E
#F6DE7D
#C8AF8A
#658385
#B04838

@

TARGET BY JASPER JOHNS
#4B6892
#F9E583
#FED43F
#F6BD28
#BE4C46

@

SELF-PORTRAIT BY FRIDA KAHLO
#121510
#6D8325
#D6CFB7
#E5AD4F
#BD5630

@

APPLE TREE BY WASSILY KANDINSKY
#5D7388
#A08F27
#E5A729
#4F4D1D
#8AAE8A

@

SOFT PRESSURE BY WASSILY KANDINSKY
#D2981A
#A53E1F
#457277
#8DCEE2
#8F657D

@

WHITE ZIG ZAGS BY WASSILY KANDINSKY
#C13C53
#DA73A8
#4052BD
#EFE96D
#D85143

@

DESTRUCTION AND HOPE BY PAUL KLEE
#A7B3CD
#E6DA9E
#676155
#CDB296
#CCD7AD

@

FIRE EVENING BY PAUL KLEE
#4F51FE
#8C1E92
#FF4E0B
#CD2019
#441C21

@

ANTHROPOMETRY: PRINCESS HELENA BY YVES KLEIN
#344CB9
#1B288A
#0F185B
#D7C99A
#F2E4C7

@

THE KISS BY GUSTAV KLIMT
#4A5FAB
#609F5C
#E3C454
#A27CBA
#B85031

@

PINK PANTHER BY JEFF KOONS
#D6AABE
#B69F7F
#ECD9AD
#76A9A2
#A26775

@

UNTITLED (1949) BY LEE KRASNER
#333333
#D1B817
#2A2996
#B34325
#C8CCC6

@

STREET SHADOWS BY JACOB LAWRENCE
#614671
#BE994A
#C8B595
#BD4335
#8B3834

@

THE LIBRARY BY JACOB LAWRENCE
#5E3194
#9870B9
#F1B02F
#EA454C
#CC0115

@

SQUIGGLES BY SOL LEWITT
#0A71B6
#F9C40A
#190506
#EB5432
#EAF2F0

@

KISS II BY ROY LICHTENSTEIN
#3229AD
#BC000E
#E7CFB7
#FFEC04
#090109

@

HOPELESS BY ROY LICHTENSTEIN
#00020E
#FFDE01
#A5BAD6
#F1C9C7
#BD0304

@

GIRL WITH BALL BY ROY LICHTENSTEIN
#C7991F
#C63D33
#23254C
#E0C4AE
#D5D0B2

@

SUPREMATIST COMPOSITION BY KAZIMIR MALEVICH
#151817
#001A56
#197C3F
#D4A821
#C74C25

@

BOATING BY ÉDOUARD MANET
#6486AD
#2D345D
#D9BE7F
#5A3A26
#C6A490

@

THE SON OF MAN BY RENÉ MAGRITTE
#B60614
#3A282F
#909018
#E3BFA1
#EE833E

@

THE MENACED ASSASSIN BY RENÉ MAGRITTE
#B6B3BB
#697D8E
#B8B87E
#6F5F4B
#292A2D

@

JESUS, SAINT PETER AND THE TAX COLLECTOR BY MASACCIO
#0E2523
#324028
#C26B61
#5A788D
#DE7944

@

THE CREATION OF ADAM BY MICHELANGELO
#42819F
#86AA7D
#CBB396
#555234
#4D280F

@

WOMAN AND DOG IN FRONT OF THE MOON BY JOAN MIRÓ
#C04759
#3B6C73
#383431
#F1D87F
#EDE5D2

@

ANNA ZBOROWSKA BY AMEDEO MODIGLIANI
#1D2025
#45312A
#7E2F28
#202938
#D58E40

@

BROADWAY BOOGIE WOOGIE BY PIET MONDRIAN
#314290
#4A71C0
#F1F2ED
#F0D32D
#AB3A2C

@

BOUQUET OF SUNFLOWERS BY CLAUDE MONET
#184430
#548150
#DEB738
#734321
#852419

@

WATER LILIES (1906) BY CLAUDE MONET
#9F4640
#4885A4
#395A92
#7EA860
#B985BA

@

WOMAN WITH A PARASOL BY CLAUDE MONET
#82A4BC
#4C7899
#2F5136
#B1B94C
#E5DCBE

@

THE SCREAM (PASTEL) BY EDVARD MUNCH
#5059A1
#EFC337
#1F386E
#D1AE82
#BE3B2C

@

THE SCREAM (OIL) BY EDVARD MUNCH
#272A2A
#E69253
#EDB931
#E4502E
#4378A0

@

VIR HEROICUS SUBLIMIS BY BARNETT NEWMAN
#442327
#C0BC98
#A6885D
#8A3230
#973B2B

@

TURNSOLE BY KENNETH NOLAND
#D0D8CD
#586180
#E2AC29
#1A1915
#E6E1CE

@

ABSTRACTION BLUE BY GEORGIA O'KEEFFE
#0E122D
#182044
#51628E
#91A1BA
#AFD0C9

@

RED TIGHTS WITH FRAGMENT 9 BY CLAES OLDENBURG
#95B1C9
#263656
#698946
#F8D440
#C82720

@

LES DEMOISELLES D'AVIGNON BY PABLO PICASSO
#CD6C74
#566C7D
#DD9D91
#A1544B
#D5898D

@

THE DREAM BY PABLO PICASSO
#4E7989
#A9011B
#E4A826
#80944E
#DCD6B2

@

NUMBER 1 BY JACKSON POLLOCK
#D89CA9
#1962A0
#F1ECD7
#E8C051
#1A1C23

@

PURPLE RAIN BY PRINCE
#735BCC
#6650B4
#59449C
#4B3984
#3E2D6C

@

LEATHERSTOCKING'S RESCUE BY JOHN QUIDOR
#B79A59
#826C37
#54442F
#DBCEAF
#C4AA52

@

TOBACCO ROSE BY MEL RAMOS
#C13E43
#376EA5
#565654
#F9D502
#E7CA6B

@

LARGE GREEN VASE WITH MIXED FLOWERS BY ODILON REDON
#695B8F
#B26C61
#C2AF46
#4D5E30
#8B1F1D

@

THE NIGHT WATCH BY REMBRANDT
#DBC99A
#A68329
#5B5224
#8A350C
#090A04

@

DANCE AT LE MOULIN DE LA GALETTE BY PIERRE-AUGUSTE RENOIR
#2B5275
#A69F55
#F1D395
#FFFBDD
#D16647

@

YOUNG GIRLS AT THE PIANO BY PIERRE-AUGUSTE RENOIR
#303241
#B7A067
#C8C2B2
#686D4F
#4D3930

@

DIVER BY BRIDGET RILEY
#FAB9AC
#7BBC53
#DE6736
#67C1EC
#E6B90D

@

MARILYN MONROE, I BY JAMES ROSENQUIST
#E25D75
#3F4C8C
#6A79B0
#D7BC1F
#DCCFAB

@

UNTITLED (1968) BY MARK ROTHKO
#E49A16
#E19713
#D67629
#DA6E2E
#D85434

@

UNTITLED (WHITE, BLACK, RUST, ON BROWN) BY MARK ROTHKO
#D5D6D1
#BEC0BF
#5B382C
#39352C
#1B1B1B

@

GARDEN STUDY OF THE VICKERS CHILDREN BY JOHN SINGER SARGENT
#B43A35
#3E501E
#F8F2F4
#6B381D
#20242D

@

VILLA DI MARLIA, LUCCA BY JOHN SINGER SARGENT
#778BD0
#E2D76B
#95BF78
#4E6A3D
#5F4F38

@

CARNATION, LILY, LILY, ROSE BY JOHN SINGER SARGENT
#EEC7A0
#EAA69C
#BD7C96
#A1A481
#D97669

@

BAUHAUS STAIRWAY BY OSKAR SCHLEMMER
#3A488A
#8785B2
#DABD61
#D95F30
#BE3428

@

A SUNDAY ON LA GRANDE JATTE BY GEORGES SEURAT
#3F3F63
#808EB7
#465946
#8C9355
#925E48

@

RADIOACTIVE CATS BY SANDY SKOGLUND
#D7F96E
#457D24
#879387
#E1C39F
#394835

@

HIDE-AND-SEEK BY PAVEL TCHELITCHEW
#AC2527
#F8CC5A
#5C8447
#61221A
#2B4868

@

A MOUNTAIN SCENE, VAL D'AOSTA BY J. M. W. TURNER
#F1ECCE
#9EA3B5
#E9D688
#A85835
#AE8045

@

UNTITLED, 1961, BY CY TWOMBLY
#F2788F
#F591EA
#F0C333
#F5C2AF
#F23B3F

@

WINE BARRELS SAILING BARGE BY JOHANN JACOB ULRICH
#FDDDAB
#E7A974
#A87250
#7B533D
#6A4531

@

RHYTHM OF A RUSSIAN DANCE BY THEO VAN DOESBURG
#BD748F
#3D578E
#BFAB68
#DAD7D0
#272928

@

STUDY FOR A COMPOSITION BY THEO VAN DOESBURG
#53628D
#B8B45B
#C1C3B6
#984F48
#2E3432

@

THE ARNOLFINI PORTRAIT BY JAN VAN EYCK
#3C490C
#3B5B71
#262121
#7C6C4E
#6C2B23

@

THE STARRY NIGHT BY VINCENT VAN GOGH
#1A3431
#2B41A7
#6283C8
#CCC776
#C7AD24

@

SELF-PORTRAIT WITH A STRAW HAT BY VINCENT VAN GOGH
#FBDC30
#A7A651
#E0BA7A
#9BA7B0
#5A5F80

@

BEDROOM IN ARLES BY VINCENT VAN GOGH
#374D8D
#93A0CB
#82A866
#C4B743
#A35029

@

HARMONY BY REMEDIOS VARO
#C8DAAD
#989E53
#738D60
#DEBC31
#9D471A

@

LAS MENINAS BY DIEGO VELÁZQUEZ
#413A2C
#241F1A
#C5B49B
#A57F5B
#5C351E

@

GIRL WITH A PEARL EARRING BY JOHANNES VERMEER
#0C0B10
#707DA6
#CCAD9D
#B08E4A
#863B34

@

THE MILKMAID BY JOHANNES VERMEER
#022F69
#D6C17A
#D8D0BE
#6B724B
#7C3E2F

@

FLOWERS, 1964, BY ANDY WARHOL
#F26386
#F588AF
#A4D984
#FCBC52
#FD814E

@

MARILYN MONROE, 1967, BY ANDY WARHOL
#FD0C81
#FFED4D
#C34582
#EBA49E
#272324

@

LIZ BY ANDY WARHOL
#D32934
#2F191B
#2BAA92
#D12E6C
#F4BCB9

@

MICK JAGGER BY ANDY WARHOL
#A99364
#DA95AA
#F4F0E4
#B74954
#C2DDB2

@

AMERICAN GOTHIC BY GRANT WOOD
#A6BDB0
#8B842F
#41240B
#9C4823
#D6AA7E

@

AN URBINO MAIOLICA ISTORIATO BY FRANCESCO XANTO
#2C6AA5
#D9AE2C
#DDC655
#D88C27
#64894D

@

UNTITLED, 1953, BY JACK YOUNGERMAN
#59A55D
#EFDB56
#7D9DC6
#ECA23F
#CA4D2A

@

HARLEM BY KARL ZERBE
#46734F
#CAAB6C
#D0CCAF
#617F97
#9A352D

@

ABAPORU BY TARSILA DO AMARAL
#015E03
#EFB08D
#E9B406
#6097C2
]]

local function ensure_size(content, size, p)
  if #content >= size then
    return content
  end

  if p == nil then
    p = '-'
  end


  while #content < size do
    content = content .. p
  end

  return content
end

local theme_i = 0

for raw_theme in themes:gmatch('([^@]*)@?') do
  theme_i = theme_i + 1

  if theme_i > 10000 then
    break
  end

  if raw_theme ~= '' then
    local theme = build_theme(raw_theme)

    local colors = 0
    for _ in pairs(theme.colors) do
      colors = colors + 1
    end

    supernova:register(theme)
    supernova:set_theme(theme.identifier)

    print('')
    print(
      supernova[theme.identifier].rainbow(
        '  # ' .. tostring(theme.original_name) ..
        ' by ' .. tostring(theme.original_author)
      )
    )

    local line = '  '
    local clean_line = '  '
    local first = true

    for _, color in pairs(theme.colors) do
      local name = supernova.name(color)
      if first then
        line = line .. supernova.color(ensure_size(name .. ' ', 20), name)
        clean_line = clean_line .. ensure_size('|' .. '|', 20, '|')
        first = false
      else
        line = line .. ' | ' .. supernova.color(ensure_size(name .. ' ', 20), name)
        clean_line = clean_line .. '|||' .. ensure_size('|' .. '|', 20, '|')
      end
    end

    print(line)
    print(supernova[theme.identifier].rainbow(clean_line))
  end
end

print('')
